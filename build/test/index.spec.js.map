{"version":3,"sources":["../../test/index.spec.js"],"names":["chai","use","sinonChai","chaiAsPromised","describe","it","taskUnderTest","Task","stageA","addStage","inport","a","res","execute","getResult","to","deep","equal","length","i0","stageB","i1","i2","b","c","x","stageC","inportA","inportB","inportC","stageD","Promise","resolve","stageE","stageF","d","i","stageG","e","withSingleInput","withInputArray","withInputsNamed","withInputsShapedLike","undefined","waitFor"],"mappings":"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","sourcesContent":["/* eslint-env mocha */\n/* eslint no-unused-expressions:0 */\n\n// Module under test\nimport Task from '../src'\n\n// Support modules\nimport sinon from 'sinon'\nimport chai, { expect } from 'chai'\nimport sinonChai from 'sinon-chai'\nimport chaiAsPromised from 'chai-as-promised'\n\nchai.use(sinonChai)\nchai.use(chaiAsPromised)\n\ndescribe('oppgave', () => {\n  it('should support single input port with scalar arguments', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (a) { return 2 * a })\n\n    // when\n    const res = await taskUnderTest.execute(31)\n\n    expect(res.getResult(stageA)).to.deep.equal(62)\n  })\n\n  it('should support single input port with array arguments', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (a) { return a.length })\n\n    // when\n    const res = await taskUnderTest.execute([3, 1, 4, 1, 5, 9])\n\n    expect(res.getResult(stageA)).to.deep.equal(6)\n  })\n\n  it('should support an array of input ports to the task', async () => {\n    // given\n    const taskUnderTest = new Task(3)\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport[0], function stageA (i0) { return i0 * 7 })\n    const stageB = taskUnderTest.addStage([taskUnderTest.inport[1], taskUnderTest.inport[2]], function stageB ([i1, i2]) { return i1 + i2 })\n\n    // when\n    const res = await taskUnderTest.execute([2, 3, 5])\n\n    expect(res.getResult(stageA)).to.deep.equal(14)\n    expect(res.getResult(stageB)).to.deep.equal(8)\n  })\n\n  it('should support an object of input ports to the task', async () => {\n    // given\n    const taskUnderTest = new Task(['a', 'b', 'c'])\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport.a, function stageA (a) { return a * 7 })\n    const stageB = taskUnderTest.addStage([taskUnderTest.inport.b, taskUnderTest.inport.c], function stageB ([b, c]) { return b + c })\n\n    // when\n    const res = await taskUnderTest.execute({ a: 11, b: 7, c: 5 })\n\n    expect(res.getResult(stageA)).to.deep.equal(77)\n    expect(res.getResult(stageB)).to.deep.equal(12)\n  })\n\n  it('should support wiring a stage to two follow on stages', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, function stageB (x) { return 2 * x })\n\n    // when\n    const res = await taskUnderTest.execute(7)\n\n    expect(res.getResult(stageA)).to.deep.equal(49)\n    expect(res.getResult(stageB)).to.deep.equal(14)\n  })\n\n  it('should support an array of wires into a stage', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, function stageB (x) { return 2 * x })\n    const stageC = taskUnderTest.addStage([stageA, stageB], function stageC ([a, b]) { return a + b + 9 })\n\n    // when\n    const res = await taskUnderTest.execute(5)\n\n    expect(res.getResult(stageA)).to.deep.equal(25)\n    expect(res.getResult(stageB)).to.deep.equal(10)\n    expect(res.getResult(stageC)).to.deep.equal(44)\n  })\n\n  it('should support a single wire into a stage', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(stageA, function stageB (a) { return a + 31 })\n\n    // when\n    const res = await taskUnderTest.execute(23)\n\n    expect(res.getResult(stageA)).to.deep.equal(529)\n    expect(res.getResult(stageB)).to.deep.equal(560)\n  })\n\n  it('should support an object of wires into a stage', async () => {\n    // given\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, function stageB (x) { return 2 * x })\n    const stageC = taskUnderTest.addStage({ a: stageA, b: stageB }, function stageC ({a, b}) { return a + b + 9 })\n\n    // when\n    const res = await taskUnderTest.execute(3)\n\n    expect(res.getResult(stageA)).to.deep.equal(9)\n    expect(res.getResult(stageB)).to.deep.equal(6)\n    expect(res.getResult(stageC)).to.deep.equal(24)\n  })\n\n  it('should support an array of output ports', async () => {\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, function stageB (x) { return 2 * x })\n    const stageC = taskUnderTest.addStage(taskUnderTest.inport, function stageC (x) { return 3 * (x ** 3) })\n\n    // when\n    const res = await taskUnderTest.execute(5)\n\n    expect(res.getResult([stageA, stageB, stageC])).to.deep.equal([\n      25,\n      10,\n      375\n    ])\n  })\n\n  it('should support an object of output ports', async () => {\n    const taskUnderTest = new Task()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, function stageA (x) { return x * x })\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, function stageB (x) { return 2 * x })\n    const stageC = taskUnderTest.addStage(taskUnderTest.inport, function stageC (x) { return 3 * (x ** 3) })\n\n    // when\n    const res = await taskUnderTest.execute(4)\n\n    expect(res.getResult({ a: stageA, b: stageB, c: stageC })).to.deep.equal({\n      a: 16,\n      b: 8,\n      c: 192\n    })\n  })\n\n  it('should support complex computation graphs', async () => {\n    // given\n    const taskUnderTest = new Task(['a', 'b', 'c'])\n    const { a: inportA, b: inportB, c: inportC } = taskUnderTest.inport\n    const stageD = taskUnderTest.addStage([inportA, inportC], function stageD ([a, c]) { return Promise.resolve(a + c) })\n    const stageE = taskUnderTest.addStage({ b: inportB }, function stageE ({ b }) { return b * b })\n    const stageF = taskUnderTest.addStage([stageD, inportA, inportB], async function stageF ([ d, a, b ]) {\n      const i = await Promise.resolve(d + a)\n      return i + b\n    })\n    const stageG = taskUnderTest.addStage({ d: stageD, e: stageE }, function stageG ({ d, e }) { return d + e })\n\n    // when\n    const res = await taskUnderTest.execute({ a: 2, b: 3, c: 4 })\n\n    expect(res.getResult(stageD)).to.equal(6)\n    expect(res.getResult(stageE)).to.equal(9)\n    expect(res.getResult(stageF)).to.equal(11)\n    expect(res.getResult(stageG)).to.equal(15)\n  })\n\n  it('should support the \"withSingleInput\" factory function', async () => {\n    // given\n    const taskUnderTest = Task.withSingleInput()\n\n    // when\n    const res = await taskUnderTest.execute(17)\n\n    expect(res.getResult(taskUnderTest.inport)).to.equal(17)\n  })\n\n  it('should support the \"withInputArray\" factory function', async () => {\n    // given\n    const taskUnderTest = Task.withInputArray(3)\n\n    // when\n    const res = await taskUnderTest.execute([21, 23, 27])\n\n    expect(res.getResult(taskUnderTest.inport)).to.deep.equal([21, 23, 27])\n  })\n\n  it('should support the \"withInputsNamed\" factory function', async () => {\n    // given\n    const taskUnderTest = Task.withInputsNamed(['a', 'b', 'c'])\n\n    // when\n    const res = await taskUnderTest.execute({ a: 1, b: true, c: 'see?' })\n\n    expect(res.getResult(taskUnderTest.inport)).to.deep.equal({ a: 1, b: true, c: 'see?' })\n  })\n\n  it('should support the \"withInputsShapedLike\" factory function', async () => {\n    // given\n    const taskUnderTest = Task.withInputsShapedLike({ a: null, b: null, c: undefined })\n\n    // when\n    const res = await taskUnderTest.execute({ a: 1, b: true, c: 'see?' })\n\n    expect(res.getResult(taskUnderTest.inport)).to.deep.equal({ a: 1, b: true, c: 'see?' })\n  })\n\n  it('should support a single stage waitFor', async () => {\n    // given\n    const taskUnderTest = Task.withSingleInput()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, i => i * i)\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, () => new Promise(() => {}))\n\n    // when\n    const res = await taskUnderTest.execute(17).waitFor(stageA)\n\n    expect(res).to.equal(289)\n  })\n\n  it('should support an array of stages for waitFor', async () => {\n    // given\n    const taskUnderTest = Task.withSingleInput()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, i => i * i)\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, i => Promise.resolve(3 * i))\n\n    // when\n    const res = await taskUnderTest.execute(6).waitFor([stageA, stageB])\n\n    expect(res).to.deep.equal([36, 18])\n  })\n\n  it('should support an object of stages for waitFor', async () => {\n    // given\n    const taskUnderTest = Task.withSingleInput()\n    const stageA = taskUnderTest.addStage(taskUnderTest.inport, i => i * i)\n    const stageB = taskUnderTest.addStage(taskUnderTest.inport, i => Promise.resolve(3 * i))\n\n    // when\n    const res = await taskUnderTest.execute(12).waitFor({ a: stageA, b: stageB, c: stageB })\n\n    expect(res).to.deep.equal({ a: 144, b: 36, c: 36 })\n  })\n\n  // TODO: Test Failures.\n})\n"],"file":"index.spec.js"}